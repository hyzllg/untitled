Index: Automated_testing/WZ_360.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import json\nimport re as res\nimport time\n\nimport requests\nfrom past.builtins import raw_input\n\nimport Collect\n\n\nclass Hyzllg:\n    def __init__(self, loanReqNo, name, idNo, phone, loanAmount, periods, custGrde, capitalCode, bankcard, url):\n        self.loanReqNo = loanReqNo\n        self.name = name\n        self.idNo = idNo\n        self.phone = phone\n        self.loanAmount = loanAmount\n        self.periods = periods\n        self.bankcard = bankcard\n        self.url = url\n        self.custGrde = custGrde\n        self.capitalCode = capitalCode\n\n    def insure_info(self):\n        data = {\n            \"channelCustId\": \"\",\n            \"name\": self.name,\n            \"insuranceNo\": self.loanReqNo,\n            \"idNo\": self.idNo,\n            \"idAddress\": \"上海市浦东新区龙阳路幸福村520号\",\n            \"phone\": self.phone,\n            \"amount\": self.loanAmount,\n            \"periods\": self.periods,\n            \"purpose\": \"07\",\n            \"capitalCode\": self.capitalCode,\n            \"custGrde\": self.custGrde,\n            \"email\": \"1264311721@hrtx.com\",\n            \"contactPhone\": \"18968523600\",\n            \"callbackUrl\": \"https://www.baidu.com\"\n        }\n        # data[\"insuranceNo\"] = self.loanReqNo\n        # data[\"name\"] = self.name\n        # data[\"idNo\"] = self.idNo\n        # data[\"phone\"] = self.phone\n        # data[\"amount\"] = self.loanAmount\n        # data[\"periods\"] = self.periods\n        # data[\"custGrde\"] = self.custGrde\n        # data[\"capitalCode\"] = self.capitalCode\n\n        url = self.url + 'INSURE_INFO'\n        title = \"**********投保信息接口！**********\"\n        requit = Collect.test_api(url,data,title)\n        if requit[\"data\"][\"status\"] == '01':\n            a = requit[\"data\"][\"insurUrl\"]\n            b = res.search(\"lp=(.*)\", a)\n            c = b.group()[3:]\n            print(\"投保信息接口成功！\")\n        else:\n            print(\"投保信息接口失败！\")\n            raw_input(\"Press <enter>\")\n        return c,data\n\n    def insure_data_query(self, token):\n        data = {\n            \"loanReqNo\": self.loanReqNo,\n            \"token\": token\n        }\n        # data[\"loanReqNo\"] = self.loanReqNo\n        # data[\"token\"] = token\n\n        title = \"**********投保资料查询接口！**********\"\n        url = self.url + 'INSURE_DATA_QUERY'\n        requit = Collect.test_api(url,data,title)\n        if requit[\"result\"] == True:\n            print(\"投保资料查询成功！\")\n        else:\n            print(\"投保资料查询失败！\")\n            raw_input(\"Press <enter>\")\n\n    def insure(self):\n        data = {\n            \"agentNo\": \"TianCheng\",\n            \"agentName\": \"甜橙保代\",\n            \"loanReqNo\": self.loanReqNo,\n            \"insReqNo\": self.loanReqNo,\n            \"name\": self.name,\n            \"idNo\": self.idNo,\n            \"phone\": self.phone,\n            \"amount\": self.loanAmount,\n            \"periods\": self.periods,\n            \"purpose\": \"07\",\n            \"premiumRate\": 1.66,\n            \"insurantName\": \"韦艺翠\",\n            \"insurantAdd\": \"上海市浦东新区龙阳路幸福村520号\",\n            \"postCode\": \"110016\",\n            \"productId\": \"7015\"\n        }\n        # data[\"loanReqNo\"] = self.loanReqNo\n        # data[\"insReqNo\"] = self.loanReqNo\n        # data[\"name\"] = self.name\n        # data[\"idNo\"] = self.idNo\n        # data[\"phone\"] = self.phone\n        # data[\"amount\"] = self.loanAmount\n        # data[\"periods\"] = self.periods\n\n        title = \"**********投保接口！**********\"\n        url = self.url + 'INSURE'\n        requit = Collect.test_api(url,data,title)\n        if requit[\"result\"] == True:\n            try:\n                if requit[\"data\"][\"message\"]:\n                    print(\"受理失败\")\n                    raw_input(\"Press <enter>\")\n            except BaseException as e:\n                if requit[\"data\"][\"status\"] == '01':\n                    print(\"已受理，处理中！\")\n        else:\n            print(\"未知错误！\")\n            raw_input(\"Press <enter>\")\n\n    def disburse(self):\n        data = {\n            \"channelCustId\": \"\",\n            \"loanReqNo\": self.loanReqNo,\n            \"idNo\": self.idNo,\n            \"insuranceNo\": self.loanReqNo,\n            \"phone\": self.phone,\n            \"loanAmount\": self.loanAmount,\n            \"productId\": \"7015\",\n            \"name\": self.name,\n            \"spelling\": \"CHENPI\",\n            \"sex\": \"01\",\n            \"nationality\": \"中国\",\n            \"nation\": \"汉族\",\n            \"birthday\": \"1991/01/08\",\n            \"idType\": \"00\",\n            \"idAddress\": \"上海市浦东新区龙阳路幸福村520号\",\n            \"idStartDate\": \"2015/10/08\",\n            \"idEndDate\": \"2025/10/08\",\n            \"idOffice\": \"杭州市公安局江干区分局\",\n            \"marriage\": \"03\",\n            \"education\": \"06\",\n            \"children\": \"00\",\n            \"supplyPeople\": 0,\n            \"house\": \"00\",\n            \"addProvince\": \"\",\n            \"addCity\": \"\",\n            \"addDistrict\": \"\",\n            \"addDetail\": \"\",\n            \"industry\": \"C\",\n            \"profession\": \"18\",\n            \"workplaceName\": \"大地保险公司\",\n            \"workTel\": \"13196853698\",\n            \"workProvince\": \"\",\n            \"workCity\": \"\",\n            \"workDistrict\": \"\",\n            \"workDetailAdd\": \"学院路100号小杨制造厂\",\n            \"workAge\": 10,\n            \"income\": \"02\",\n            \"school\": \"清华大学\",\n            \"email\": \"1264311721@hrtx.com\",\n            \"contacts\": [\n                {\n                    \"relation\": \"00\",\n                    \"name\": \"哈利路亚\",\n                    \"phoneNo\": \"18968523600\"\n                },\n            ],\n            \"bankCard\": self.bankcard,\n            \"bankName\": \"中国农业银行\",\n            \"bankPhone\": \"18968523600\",\n            \"applyProvince\": \"\",\n            \"applyCity\": \"\",\n            \"applyDistrict\": \"\",\n            \"periods\": self.periods,\n            \"purpose\": \"07\",\n            \"direction\": \"\",\n            \"payType\": \"01\",\n            \"payMerchantNo\": \"\",\n            \"authFlag\": \"01\",\n            \"deviceDetail\": {\n                \"deviceId\": \"\",\n                \"mac\": \"NONE\",\n                \"longitude\": \"23.232653\",\n                \"latitude\": \"88.369689\",\n                \"gpsCity\": \"\",\n                \"ip\": \"192.3.46.57\",\n                \"ipCity\": \"\",\n                \"oS\": \"\"\n            },\n            \"docDate\": \"\",\n            \"channelDetail\": {\n                \"capitalCode\": self.capitalCode,\n                \"custGrde\": self.custGrde,\n                \"payType\": \"03\",\n                \"applyEntry\": \"03\",\n                \"creditDuration\": \"2020/03/02\",\n                \"faceRecoType\": \"01\",\n                \"faceRecoScore\": 66,\n                \"currLimit\": 20000.00,\n                \"currRemainLimit\": 20000.00,\n                \"firstLoanFlag\": \"N\",\n                \"settleLoanNum\": 1,\n                \"unsettleLoanLimit\": 1,\n                \"unsettleLoanNum\": 1.66,\n                \"longestOverPeriod\": 1,\n                \"applyLevel360\": 100,\n                \"actionLevel360\": 100,\n                \"realFaceCheckResult\": \"1\",\n                \"citizenshipCheckResult\": \"1\",\n                \"bankCheckResult\": \"1\",\n                \"telcoCheckResult\": \"1\"\n            }\n        }\n        # data[\"loanReqNo\"] = self.loanReqNo\n        # data[\"insuranceNo\"] = self.loanReqNo\n        # data[\"name\"] = self.name\n        # data[\"phone\"] = self.phone\n        # data[\"idNo\"] = self.idNo\n        # data[\"loanAmount\"] = self.loanAmount\n        # data[\"periods\"] = self.periods\n        # data[\"bankCard\"] = self.bankcard\n        # data[\"channelDetail\"][\"custGrde\"] = self.custGrde\n        # data[\"channelDetail\"][\"capitalCode\"] = self.capitalCode\n\n        title = \"**********支用接口！**********\"\n        url = self.url + 'DISBURSE'\n        requit = Collect.test_api(url,data,title)\n        if requit[\"result\"] == True:\n            if requit[\"data\"][\"status\"] == \"01\":\n                print(\"放款受理成功，处理中！\")\n            elif requit[\"data\"][\"status\"] == \"00\":\n                print(\"受理失败！\")\n                raw_input(\"Press <enter>\")\n        else:\n            print(\"未知错误！\")\n            raw_input(\"Press <enter>\")\n\n    def disburse_in_query(self, test_info):\n        data = {\n            \"channelCustId\": \"\",\n            \"loanReqNo\": \"2020061845630001\"\n        }\n        data[\"loanReqNo\"] = self.loanReqNo\n        while True:\n            time.sleep(3)\n            title = \"**********放款结果查询接口！**********\"\n            url = self.url + 'DISBURSE_IN_QUERY'\n            requit = Collect.test_api(url, data, title)\n\n            if requit[\"result\"] == True:\n                print(\"放款结果查询接口调用成功！\")\n                if requit[\"data\"][\"status\"] == '01':\n                    print(\"支用成功，银行放款成功！\")\n                    print(test_info)\n                elif requit[\"data\"][\"status\"] == '00':\n                    print(\"支用中，银行放款中\")\n                    continue\n                elif requit[\"data\"][\"status\"] == '03':\n                    print(\"授信审批中\")\n                    continue\n                elif requit[\"data\"][\"status\"] == '04':\n                    print(\"授信审批成功\")\n                    continue\n                elif requit[\"data\"][\"status\"] == '05':\n                    print(\"授信审批拒绝\")\n                    raw_input(\"Press <enter>\")\n                elif requit[\"data\"][\"status\"] == '02':\n                    print(\"支用失败，银行放款失败\")\n                    raw_input(\"Press <enter>\")\n                else:\n                    print(\"未知错误！\")\n                    raw_input(\"Press <enter>\")\n\n            else:\n                print(\"未知错误！\")\n                raw_input(\"Press <enter>\")\n\n\ndef main_360(a,b):\n    for i in range(b):\n        random__name = Collect.random_name()\n        generate__ID = Collect.id_card().generate_ID()\n        HB_phone = Collect.phone()\n        Bank = Collect.bankcard()\n        #指定姓名身份证手机号时使用\n        # random__name = \"羊卡国\"\n        # generate__ID = \"220403199512301943\"\n        # HB_phone = \"16608058360\"\n        # Bank = \"6214661723533450\"\n\n        HB_loanReqNo = Collect.loanReqNo()\n        # 借款金额\n        loanAmount = 6000\n        # 期数\n        periods = '6'\n        # 客户等级\n        custGrde = 18\n        # 资方代码 (微众：FBBANK，龙江：20062)\n        capitalCode = \"FBBANK\"\n\n        if a == 0:\n            hyzllg = Hyzllg(HB_loanReqNo, random__name, generate__ID, HB_phone, loanAmount, periods, custGrde, capitalCode,\n                            Bank, Collect.sit_url_360)\n        elif a == 1:\n            hyzllg = Hyzllg(HB_loanReqNo, random__name, generate__ID, HB_phone, loanAmount, periods, custGrde, capitalCode,\n                            Bank, Collect.uat_url_360)\n        elif a == 2:\n            hyzllg = Hyzllg(HB_loanReqNo, random__name, generate__ID, HB_phone, loanAmount, periods, custGrde, capitalCode,\n                            Bank, Collect.dev_url_360)\n        else:\n            print(\"........\")\n\n        test_info = f'''\n                        姓名：{random__name}\n                        身份证号：{generate__ID}\n                        手机号：{HB_phone}\n                        借款金额:{loanAmount}\n                        借款期次:{periods}\n                        loanReqNo:{HB_loanReqNo}\n                    '''\n        insure = hyzllg.insure_info()[0]\n        hyzllg.insure_data_query(insure)\n        hyzllg.insure()\n        hyzllg.disburse()\n        # Python_crawler.disburse_in_query(test_info)\n        time.sleep(1)\n        print(test_info)\n        # raw_input(\"Press <enter>\")\n\n\nif __name__ == '__main__':\n    # 0是SIT\n    # 1是UAT\n    # 2是DEV\n    main_360(1,1)\n
===================================================================
diff --git a/Automated_testing/WZ_360.py b/Automated_testing/WZ_360.py
--- a/Automated_testing/WZ_360.py	
+++ b/Automated_testing/WZ_360.py	
@@ -1,7 +1,6 @@
 import json
 import re as res
 import time
-
 import requests
 from past.builtins import raw_input
 
@@ -333,4 +332,4 @@
     # 0是SIT
     # 1是UAT
     # 2是DEV
-    main_360(1,1)
+    main_360(0,1)
